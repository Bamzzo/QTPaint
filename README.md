# Qt ç»˜å›¾è½¯ä»¶é¡¹ç›®æ€»ç»“

è¿™æ˜¯ä¸€ä¸ªåŸºäº Qt 6 å¼€å‘çš„ç»˜å›¾è½¯ä»¶ï¼Œå®ç°äº†å¤šç§ç»˜å›¾å·¥å…·ã€å†å²è®°å½•ç®¡ç†ã€é¢œè‰²é€‰æ‹©ã€å›¾åƒä¿å­˜ä¸åŠ è½½ç­‰åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨ C++ é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼Œæ‰€æœ‰ UI ç»„ä»¶å‡é€šè¿‡ä»£ç å®ç°ã€‚

## é¡¹ç›®äº®ç‚¹

- ğŸ¨ **å¤šç§ç»˜å›¾å·¥å…·**ï¼šæ”¯æŒè‡ªç”±ç»˜åˆ¶ã€ç›´çº¿ã€çŸ©å½¢ã€æ¤­åœ†ã€ç®­å¤´ã€äº”è§’æ˜Ÿã€è±å½¢ã€å¿ƒå½¢ã€æ©¡çš®æ“¦
- âª **å†å²è®°å½•ç®¡ç†**ï¼šæ”¯æŒ 50 æ­¥çš„æ’¤é”€/é‡åšåŠŸèƒ½
- ğŸ“‚ **æ–‡ä»¶æ“ä½œ**ï¼šæ”¯æŒä¿å­˜ä¸º PNG/JPEG/BMP æ ¼å¼ï¼Œå¯åŠ è½½å·²æœ‰å›¾åƒç»§ç»­ç¼–è¾‘
- ğŸ–±ï¸ **å›¾å…ƒç¼–ç»„**ï¼šæ”¯æŒé€‰æ‹©å¹¶ç§»åŠ¨å¤šä¸ªå›¾å½¢
- ğŸ§© **é¢å‘å¯¹è±¡è®¾è®¡**ï¼šåˆç†è¿ç”¨å°è£…ã€ç»§æ‰¿ã€å¤šæ€ç­‰ OOP ç‰¹æ€§
- ğŸ“± **å“åº”å¼ç•Œé¢**ï¼šæ”¯æŒå›¾åƒç¼©æ”¾å’Œå¹³ç§»æ“ä½œ

## æŠ€æœ¯æ ˆ

- **å¼€å‘æ¡†æ¶**ï¼šQt 6.9.0
- **ç¼–ç¨‹è¯­è¨€**ï¼šC++17
- **ç¼–è¯‘å™¨**ï¼šMinGW 64-bit
- **æ„å»ºç³»ç»Ÿ**ï¼šqmake
- **å¼€å‘ç¯å¢ƒ**ï¼šQt Creator 16.0.2

## ç³»ç»Ÿæ¶æ„

```
è¡¨ç¤ºå±‚ (MainWindow)
â”œâ”€â”€ å·¥å…·æ ç®¡ç†
â”œâ”€â”€ çŠ¶æ€æ æ˜¾ç¤º
â””â”€â”€ ç”¨æˆ·è¾“å…¥å¤„ç†

ä¸šåŠ¡é€»è¾‘å±‚ (PaintArea)
â”œâ”€â”€ ç»˜å›¾çŠ¶æ€ç®¡ç†
â”œâ”€â”€ å‘½ä»¤æ‰§è¡Œä¸æ’¤é”€
â””â”€â”€ åæ ‡ç³»ç»Ÿè½¬æ¢

æ•°æ®å±‚ (Shapeç±»å±‚æ¬¡ç»“æ„)
â”œâ”€â”€ å›¾å½¢æ•°æ®å­˜å‚¨
â”œâ”€â”€ ç»˜åˆ¶ç®—æ³•å®ç°
â””â”€â”€ è¾¹ç•Œè®¡ç®—
```

## æ ¸å¿ƒåŠŸèƒ½å®ç°ç¤ºä¾‹

### 1. å¤šæ€å›¾å½¢å·¥å‚
```cpp
switch(currentShapeType) {
case Freehand:
    currentShape = new PathShape(...);
    break;
case Line:
    currentShape = new LineShape(...);
    break;
// ...å…¶ä»–å›¾å½¢ç±»å‹
}
```

### 2. æ’¤é”€/é‡åšç³»ç»Ÿ
```cpp
// ä¿å­˜çŠ¶æ€
void PaintArea::saveState() {
    QImage stateImage = ...;
    undoStack.push(stateImage);
    if (undoStack.size() > 50) undoStack.removeFirst();
    redoStack.clear();
}

// æ’¤é”€æ“ä½œ
void PaintArea::undo() {
    if (undoStack.size() > 1) {
        redoStack.push(undoStack.pop());
        // æ¢å¤çŠ¶æ€...
    }
}
```

### 3. å¤æ‚å›¾å½¢ç®—æ³•ï¼ˆäº”è§’æ˜Ÿï¼‰
```cpp
void StarShape::draw(QPainter& painter) const {
    // è®¡ç®—äº”è§’æ˜Ÿé¡¶ç‚¹
    for (int i = 0; i < 5; ++i) {
        qreal angle = 2 * M_PI * i / 5 - M_PI/2;
        QPointF outerPoint = center + QPointF(radius * cos(angle), ...);
        // ç»˜åˆ¶è·¯å¾„...
    }
}
```

## è¿è¡Œæ•ˆæœ

| ç‰ˆæœ¬ | ç•Œé¢ç‰¹ç‚¹ |
|------|----------|
| 1.1 | åŸºç¡€æ§ä»¶å¸ƒå±€ |
| 1.2 | ä¼˜åŒ–è§†è§‰æ•ˆæœ |
| 1.3 | æ·»åŠ å›¾æ ‡å’Œæ“ä½œæŒ‡å¼• |

<img width="519" alt="e9e8cfb0959db3f29280c34f2efad59" src="https://github.com/user-attachments/assets/a46cb03d-20c9-4d8c-93df-c5279192d741" />


## é¡¹ç›®ç»“æ„

```
PaintProject/
â”œâ”€â”€ main.cpp                # ç¨‹åºå…¥å£
â”œâ”€â”€ mainwindow.h/cpp        # ä¸»çª—å£å®ç°
â”œâ”€â”€ paintarea.h/cpp         # ç»˜å›¾åŒºåŸŸå®ç°
â”œâ”€â”€ shape.h                 # å›¾å½¢åŸºç±»
â”œâ”€â”€ shapes.h/cpp            # å…·ä½“å›¾å½¢å®ç°
â””â”€â”€ PaintProject.pro        # é¡¹ç›®é…ç½®æ–‡ä»¶
```

## ç¼–è¯‘è¿è¡Œ

1. å®‰è£… Qt 6.9.0+ å’Œ MinGW ç¼–è¯‘å™¨
2. æ‰“å¼€ `PaintProject.pro` æ–‡ä»¶
3. æ„å»ºå¹¶è¿è¡Œé¡¹ç›®

## æœªæ¥æ”¹è¿›æ–¹å‘

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šä¼˜åŒ–å¤æ‚å›¾å½¢çš„ç»˜åˆ¶ç®—æ³•
2. **åŠŸèƒ½å¢å¼º**ï¼šæ·»åŠ æ–‡æœ¬è¾“å…¥ã€æ¸å˜å¡«å……ç­‰åŠŸèƒ½
3. **ç•Œé¢ç¾åŒ–**ï¼šæ”¹è¿›UIè®¾è®¡å’Œäº¤äº’ä½“éªŒ
4. **è·¨å¹³å°æ”¯æŒ**ï¼šé€‚é…Linuxå’ŒmacOSç³»ç»Ÿ
5. **ç¨³å®šæ€§æå‡**ï¼šä¿®å¤è¾¹ç•Œæ¡ä»¶ä¸‹çš„å´©æºƒé—®é¢˜

## é¡¹ç›®æ”¶è·

é€šè¿‡æœ¬é¡¹ç›®ï¼Œæ·±å…¥æŒæ¡äº†ï¼š
- Qtæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶å’Œç»˜å›¾æœºåˆ¶
- C++é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™çš„å®é™…åº”ç”¨
- å›¾å½¢ç»˜åˆ¶ç®—æ³•çš„å®ç°åŸç†
- æ’¤é”€/é‡åšç­‰é«˜çº§åŠŸèƒ½çš„å®ç°æ–¹å¼
- è½¯ä»¶è°ƒè¯•å’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§

> é¡¹ç›®å·²æ‰˜ç®¡åœ¨ GitHubï¼Œæ¬¢è¿æå‡ºæ”¹è¿›å»ºè®®ï¼
